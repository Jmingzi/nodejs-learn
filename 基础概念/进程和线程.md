## 目录
本文阐述的内容为，在js的世界中，进程、线程、协程以及EventLoop的存在

## 概念

##### 进程process

进程是程序执行的实例，程序只是一些指令的描述集合，一个CPU总是运行一个进程。

不同的进程之间不能通信，拥有独立的内存，是操作系统进行资源分配和调度的一个独立单位。

##### 线程Thread

进程是线程的容器，一个进程中有一个或多个线程。线程是独立调度和分派的基本单位，换句话说是程序执行的最小单位，而进程是操作系统中资源分配的最小单位。

[wiki进程](https://zh.wikipedia.org/wiki/%E8%A1%8C%E7%A8%8B)、[wiki线程](https://zh.wikipedia.org/wiki/%E7%BA%BF%E7%A8%8B)


##### 举个例子

chrome浏览器，新开一个tab就是新开一个进程，一个tab打开的一个网页，里面有js引擎执行、http请求、页面渲染等，这些被称为线程。

新开一个tab的本质也就是新建一个浏览器实例，这说明浏览器内核是多线程的，浏览器的常驻线程有

- GUI 渲染线程
-  JavaScript引擎线程
-  定时触发器线程
-  事件触发线程
-  异步http请求线程

----

##### 协程Coroutine

由于在浏览器的js的世界中，它的存在微弱，我似乎都不曾听说过这个概念。理解它，常常需要借助[子程序](https://zh.wikipedia.org/wiki/%E5%AD%90%E7%A8%8B%E5%BA%8F)的概念，也就是纯函数，纯函数我们知道，只有入参出参，内部无副作用，一旦执行完毕，该函数就会被销毁。

而协程呢？在一个协程里，一个入参出参结束后，又会进入到下一个入参中。

协程有点像函数，又有点像线程。它的运行流程大致如下

- 第一步，协程A开始执行。
- 第二步，协程A执行到一半，进入暂停，执行权转移到协程B。
- 第三步，（一段时间后）协程B交还执行权。
- 第四步，协程A恢复执行。

用es6的`Generator`函数来举例子

```js
function* gen(x){
  var y = yield x + 2
  return y
}

var g = gen(1)
g.next() // { value: 3, done: false }
g.next(2) // { value: 2, done: true }
```

流程为
- 协程gen开始执行
- 暂停执行，执行协程b，`x+2`
- 协程b执行完成，协程gen继续执行

它可以中断程序的执行，协程的切换由用户手动来控制，就好比说，切换线程由用户切换的一样。

协程的作用是什么？

由于我几乎不怎么用，不能体会到，但我想，在浏览器的js世界里，优化代码组织结构？

参考，[协程的好处有哪些？](https://www.zhihu.com/question/20511233)、[Generator 函数的含义与用法](http://www.ruanyifeng.com/blog/2015/04/generator.html)

###